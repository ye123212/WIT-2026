:root {
  --primary: #4A90E2;
  --secondary: #50E3C2;
  --accent: #F5A623;
  --bg: #F9FAFB;
  --card: #FFFFFF;
  --text: #1C1C1E;
  --muted: #6B6B78;
  --border: #E5E7EB;
}
html[data-theme='dark'] { --bg:#1E1E2F; --card:#2A2A3C; --text:#F6F7FA; --muted:#B5B6C6; --border:#40435C; }
*{box-sizing:border-box}
body{margin:0;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text)}
h1{font-size:28px} h2{font-size:20px} .small{font-size:12px;color:var(--muted)}
.topbar{display:flex;justify-content:space-between;padding:16px 24px;border-bottom:1px solid var(--border)}
.container{max-width:1200px;margin:0 auto;padding:16px}
.tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:16px}
.tab{height:60px;border:1px solid var(--border);border-radius:16px;background:var(--card);cursor:pointer;transition:.2s}
.tab:hover{transform:scale(1.05)} .tab.active{background:var(--primary);color:#fff}
.panel{display:none;opacity:0}.panel.active{display:block;animation:fade .2s forwards}
@keyframes fade{to{opacity:1}}
.card,.surface,dialog{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.08)}
.card:hover{transform:scale(1.03);transition:.2s}
.grid{display:grid;gap:16px}.cols-1{grid-template-columns:1fr}.cols-2{grid-template-columns:repeat(2,1fr)}.cols-3{grid-template-columns:repeat(3,1fr)}
label{display:flex;flex-direction:column;gap:8px}input,select,textarea{padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text)}
.progress-track{height:6px;background:#dbeafe;border-radius:999px;margin-bottom:16px}.progress-fill{height:100%;width:25%;background:linear-gradient(90deg,var(--primary),var(--secondary));border-radius:999px}
.btn{padding:10px 14px;border:0;border-radius:8px;cursor:pointer;transition:.15s}.btn:hover{transform:scale(1.05)}.btn:active{transform:translateY(2px)}
.btn.primary{background:var(--primary);color:#fff}.btn.success{background:var(--secondary)}.btn.warning{background:var(--accent)}.btn.ghost{border:1px solid var(--border);background:transparent}
.wizard-actions,.button-row,.button-col{display:flex;gap:8px;flex-wrap:wrap;margin-top:16px}.button-col{flex-direction:column}
.slider-wrap{position:relative}.slider-wrap output{position:absolute;right:0;top:-20px;font-size:12px;color:var(--primary)}input[type='range']{width:100%;accent-color:var(--primary)}
.chip-row{display:flex;gap:8px;flex-wrap:wrap}.chip{padding:8px 10px;border-radius:999px;border:1px solid var(--border);background:var(--bg);cursor:pointer}.chip.active{border-color:var(--primary);background:#eff6ff}
.ring-wrap{position:relative;display:grid;place-items:center}.timer-ring{width:88px;height:88px;transform:rotate(-90deg)}.ring-bg,.ring-progress{fill:transparent;stroke-width:10}.ring-bg{stroke:#d1d5db}.ring-progress{stroke:var(--secondary);stroke-dasharray:327;stroke-dashoffset:327;transition:stroke-dashoffset .8s,stroke .2s}
.xp-track{height:12px;background:#dbeafe;border-radius:999px}.xp-fill{height:100%;width:0;background:linear-gradient(90deg,var(--primary),var(--secondary));border-radius:999px}
.avatar-growth-label{margin-top:10px;display:block}
.xp-avatar{--pet-scale:.76;--fur-shadow:.1;--glow-opacity:.14;position:relative;min-height:232px;display:grid;place-items:center;overflow:hidden}
.xp-avatar .avatar-glow{position:absolute;width:182px;height:182px;border-radius:50%;background:radial-gradient(circle,rgba(74,144,226,.3),transparent 66%);opacity:var(--glow-opacity);animation:pandaGlow 3.2s ease-in-out infinite}
.xp-avatar .animal-wrap{position:relative;transform:scale(var(--pet-scale));transform-origin:center bottom;animation:pandaIdle 3s ease-in-out infinite;transition:transform .55s ease,filter .5s ease}

.xp-avatar .animal-head{position:relative;width:104px;height:95px;border-radius:52% 52% 48% 48%;background:radial-gradient(circle at 32% 25%,#fff,#f2f4f7 74%);margin:0 auto -6px;border:2px solid rgba(20,20,25,.08);box-shadow:0 8px 18px rgba(0,0,0,.14)}
.xp-avatar .animal-head .ear{position:absolute;top:-14px;width:28px;height:28px;border-radius:50%;background:#0f1014;box-shadow:inset -4px -4px 0 rgba(255,255,255,.08)}
.xp-avatar .animal-head .ear.left{left:10px;transform:rotate(-15deg)}
.xp-avatar .animal-head .ear.right{right:10px;transform:rotate(15deg)}
.xp-avatar .animal-head .eye{position:absolute;top:34px;width:10px;height:12px;border-radius:46%;background:#121317;animation:pandaBlink 5s infinite;transform-origin:center}
.xp-avatar .animal-head .eye::after{content:'';position:absolute;top:2px;left:2px;width:3px;height:3px;border-radius:50%;background:#fff;opacity:.95}
.xp-avatar .animal-head .eye.left{left:30px}
.xp-avatar .animal-head .eye.right{right:30px;animation-delay:.22s}
.xp-avatar .animal-head .eye.left::before,.xp-avatar .animal-head .eye.right::before{content:'';position:absolute;top:-7px;left:-9px;width:27px;height:28px;border-radius:50% 54% 46% 56%;background:#131418;z-index:-1;opacity:.96}
.xp-avatar .animal-head .nose{position:absolute;bottom:22px;left:50%;transform:translateX(-50%);width:13px;height:10px;background:#111217;clip-path:polygon(50% 100%,0 0,100% 0)}
.xp-avatar .animal-head .muzzle{position:absolute;left:50%;bottom:8px;transform:translateX(-50%);width:23px;height:12px;border-bottom:2px solid #2d2e34;border-radius:0 0 14px 14px}

.xp-avatar .animal-body{margin:0 auto;width:126px;height:118px;border-radius:50% 50% 40% 40%;background:radial-gradient(circle at 36% 26%,#fff,#eceff3 78%);box-shadow:0 12px 24px rgba(0,0,0,.15), inset 0 -8px 18px rgba(0,0,0,var(--fur-shadow));position:relative}
.xp-avatar .animal-body::before,.xp-avatar .animal-body::after{content:'';position:absolute;top:24px;width:30px;height:64px;border-radius:18px;background:#121318}
.xp-avatar .animal-body::before{left:-11px;transform:rotate(8deg)}
.xp-avatar .animal-body::after{right:-11px;transform:rotate(-8deg)}
.xp-avatar .animal-body .belly{position:absolute;left:50%;top:28px;transform:translateX(-50%);width:72px;height:68px;border-radius:46%;background:radial-gradient(circle,#fff,#f3f4f7 72%)}
.xp-avatar .animal-body .paw{position:absolute;top:32px;width:26px;height:48px;border-radius:14px;background:#111318;opacity:.96}
.xp-avatar .animal-body .paw.left{left:14px;transform:rotate(10deg)}
.xp-avatar .animal-body .paw.right{right:14px;transform:rotate(-10deg)}
.xp-avatar .animal-wrap::before,.xp-avatar .animal-wrap::after{content:'';position:absolute;bottom:2px;width:30px;height:30px;border-radius:50%;background:#111318}
.xp-avatar .animal-wrap::before{left:22px}
.xp-avatar .animal-wrap::after{right:22px}

.xp-avatar .tail{position:absolute;right:-14px;bottom:34px;width:30px;height:30px;border-radius:50%;background:radial-gradient(circle at 35% 30%,#fff,#eceef0 80%);box-shadow:0 4px 11px rgba(0,0,0,.2);animation:tailBob 1.9s ease-in-out infinite}
.xp-avatar .accessory{display:none;position:absolute;top:14px;right:-8px;width:26px;height:15px;border-radius:999px;background:linear-gradient(90deg,#4A90E2,#50E3C2)}

.xp-avatar.stage-young{--pet-scale:.72;--glow-opacity:.1;--fur-shadow:.06}
.xp-avatar.stage-growing{--pet-scale:.92;--glow-opacity:.22;--fur-shadow:.1}
.xp-avatar.stage-growing .animal-head{transform:rotate(-3deg)}
.xp-avatar.stage-growing .tail{width:32px;height:32px}
.xp-avatar.stage-growing .accessory{display:block;opacity:.72}
.xp-avatar.stage-mature{--pet-scale:1.07;--glow-opacity:.34;--fur-shadow:.14}
.xp-avatar.stage-mature .animal-wrap{filter:drop-shadow(0 8px 12px rgba(0,0,0,.13));animation:pandaIdle 2.5s ease-in-out infinite}
.xp-avatar.stage-mature .animal-head{transform:rotate(-6deg)}
.xp-avatar.stage-mature .animal-body .paw.left{animation:pawWave 1.4s ease-in-out infinite}
.xp-avatar.stage-mature .tail{width:34px;height:34px;animation:tailBob 1.2s ease-in-out infinite}
.xp-avatar.stage-mature .accessory{display:block;opacity:1}

@keyframes pandaIdle{0%,100%{transform:translateY(0) scale(var(--pet-scale))}50%{transform:translateY(-7px) scale(var(--pet-scale))}}
@keyframes pandaBlink{0%,44%,48%,100%{transform:scaleY(1)}46%{transform:scaleY(.08)}}
@keyframes tailBob{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
@keyframes pawWave{0%,100%{transform:rotate(10deg)}50%{transform:rotate(22deg)}}
@keyframes pandaGlow{0%,100%{transform:scale(1);opacity:var(--glow-opacity)}50%{transform:scale(1.1);opacity:calc(var(--glow-opacity) + .1)}}
.badge-list{display:flex;flex-wrap:wrap;gap:8px}.badge{padding:8px 10px;border-radius:999px}.badge.locked{filter:grayscale(1);opacity:.5;border:1px dashed var(--border)}.badge.earned{background:#ffedd5}
.toast-root{position:fixed;top:16px;right:16px;display:grid;gap:8px;z-index:999}.toast{padding:12px 14px;border-radius:12px;background:var(--card);border:1px solid var(--border);animation:slide .2s}.bg-shape{position:fixed;z-index:-1;border-radius:999px;opacity:.2;filter:blur(24px)}.shape-a{width:240px;height:240px;background:var(--primary);left:-50px;top:-50px}.shape-b{width:200px;height:200px;background:var(--secondary);right:-50px;bottom:20%}
.hidden{display:none!important}
.profile-points{white-space:pre-line;line-height:1.6}
@keyframes slide{from{transform:translateX(15px);opacity:0}}
@media (max-width:1024px){.tabs{grid-template-columns:repeat(3,1fr)}.cols-3{grid-template-columns:repeat(2,1fr)}}
@media (max-width:768px){.tabs{grid-template-columns:repeat(2,1fr)}.cols-2,.cols-3{grid-template-columns:1fr}}

#requestChatLog{white-space:pre-line;line-height:1.5;min-height:72px}

.notification-item{padding:8px 10px;border-bottom:1px solid var(--border)}
