:root {
  --primary: #4A90E2;
  --secondary: #50E3C2;
  --accent: #F5A623;
  --bg: #F9FAFB;
  --card: #FFFFFF;
  --text: #1C1C1E;
  --muted: #6B6B78;
  --border: #E5E7EB;
}
html[data-theme='dark'] { --bg:#1E1E2F; --card:#2A2A3C; --text:#F6F7FA; --muted:#B5B6C6; --border:#40435C; }
*{box-sizing:border-box}
body{margin:0;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text)}
h1{font-size:28px} h2{font-size:20px} .small{font-size:12px;color:var(--muted)}
.topbar{display:flex;justify-content:space-between;padding:16px 24px;border-bottom:1px solid var(--border)}
.container{max-width:1200px;margin:0 auto;padding:16px}
.tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:16px}
.tab{height:60px;border:1px solid var(--border);border-radius:16px;background:var(--card);cursor:pointer;transition:.2s}
.tab:hover{transform:scale(1.05)} .tab.active{background:var(--primary);color:#fff}
.panel{display:none;opacity:0}.panel.active{display:block;animation:fade .2s forwards}
@keyframes fade{to{opacity:1}}
.card,.surface,dialog{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.08)}
.card:hover{transform:scale(1.03);transition:.2s}
.grid{display:grid;gap:16px}.cols-2{grid-template-columns:repeat(2,1fr)}.cols-3{grid-template-columns:repeat(3,1fr)}
label{display:flex;flex-direction:column;gap:8px}input,select,textarea{padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text)}
.progress-track{height:6px;background:#dbeafe;border-radius:999px;margin-bottom:16px}.progress-fill{height:100%;width:25%;background:linear-gradient(90deg,var(--primary),var(--secondary));border-radius:999px}
.btn{padding:10px 14px;border:0;border-radius:8px;cursor:pointer;transition:.15s}.btn:hover{transform:scale(1.05)}.btn:active{transform:translateY(2px)}
.btn.primary{background:var(--primary);color:#fff}.btn.success{background:var(--secondary)}.btn.warning{background:var(--accent)}.btn.ghost{border:1px solid var(--border);background:transparent}
.wizard-actions,.button-row,.button-col{display:flex;gap:8px;flex-wrap:wrap;margin-top:16px}.button-col{flex-direction:column}
.slider-wrap{position:relative}.slider-wrap output{position:absolute;right:0;top:-20px;font-size:12px;color:var(--primary)}input[type='range']{width:100%;accent-color:var(--primary)}
.chip-row{display:flex;gap:8px;flex-wrap:wrap}.chip{padding:8px 10px;border-radius:999px;border:1px solid var(--border);background:var(--bg);cursor:pointer}.chip.active{border-color:var(--primary);background:#eff6ff}
.ring-wrap{position:relative;display:grid;place-items:center}.timer-ring{width:88px;height:88px;transform:rotate(-90deg)}.ring-bg,.ring-progress{fill:transparent;stroke-width:10}.ring-bg{stroke:#d1d5db}.ring-progress{stroke:var(--secondary);stroke-dasharray:327;stroke-dashoffset:327;transition:stroke-dashoffset .8s,stroke .2s}
.xp-track{height:12px;background:#dbeafe;border-radius:999px}.xp-fill{height:100%;width:0;background:linear-gradient(90deg,var(--primary),var(--secondary));border-radius:999px}
.avatar-growth-label{margin-top:10px;display:block}
.xp-avatar{--pet-scale:.74;--glow-opacity:.16;position:relative;min-height:200px;display:grid;place-items:center;overflow:hidden}
.xp-avatar .avatar-glow{position:absolute;width:160px;height:160px;border-radius:50%;background:radial-gradient(circle,rgba(80,227,194,.55),transparent 65%);opacity:var(--glow-opacity);animation:glowPulse 2.8s ease-in-out infinite}
.xp-avatar .animal-wrap{position:relative;transform:scale(var(--pet-scale));transform-origin:center bottom;animation:petIdle 2.4s ease-in-out infinite;transition:transform .5s ease,filter .5s ease}
.xp-avatar .animal-head{position:relative;width:78px;height:70px;border-radius:48% 48% 44% 44%;background:linear-gradient(145deg,#ffd9b1,#ffc78f);margin:0 auto;border:2px solid rgba(0,0,0,.05);box-shadow:0 8px 14px rgba(0,0,0,.11)}
.xp-avatar .animal-head .ear{position:absolute;top:-18px;width:24px;height:28px;background:#ffb870;border-radius:70% 70% 30% 30%;border:2px solid rgba(0,0,0,.05)}
.xp-avatar .animal-head .ear::after{content:'';position:absolute;inset:5px;border-radius:inherit;background:#ffd9b8}
.xp-avatar .animal-head .ear.left{left:8px;transform:rotate(-12deg)}
.xp-avatar .animal-head .ear.right{right:8px;transform:rotate(12deg)}
.xp-avatar .animal-head .eye{position:absolute;top:28px;width:8px;height:9px;border-radius:50%;background:#2f2f36;animation:petBlink 4.6s infinite;transform-origin:center}
.xp-avatar .animal-head .eye.left{left:22px}
.xp-avatar .animal-head .eye.right{right:22px;animation-delay:.22s}
.xp-avatar .animal-head .nose{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);width:12px;height:8px;border-radius:50%;background:#7a4e45}
.xp-avatar .animal-body{margin:8px auto 0;width:86px;height:88px;border-radius:42px 42px 24px 24px;background:linear-gradient(160deg,#f6aa67,#e8894f);position:relative;box-shadow:0 10px 16px rgba(0,0,0,.12)}
.xp-avatar .animal-body::before,.xp-avatar .animal-body::after{content:'';position:absolute;bottom:-6px;width:14px;height:24px;background:#e8894f;border-radius:10px}
.xp-avatar .animal-body::before{left:20px}
.xp-avatar .animal-body::after{right:20px}
.xp-avatar .tail{position:absolute;right:-14px;bottom:16px;width:56px;height:14px;background:linear-gradient(90deg,#e8894f,#ffd8b6);border-radius:999px;transform-origin:left center;animation:tailWag 1.05s ease-in-out infinite}
.xp-avatar .accessory{display:none;position:absolute;top:2px;right:2px;width:18px;height:18px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 4px rgba(245,166,35,.2)}

.xp-avatar.stage-young{--pet-scale:.72;--glow-opacity:.14}
.xp-avatar.stage-growing{--pet-scale:.9;--glow-opacity:.25}
.xp-avatar.stage-growing .animal-body{background:linear-gradient(160deg,#f3a15b,#d97842)}
.xp-avatar.stage-growing .accessory{display:block}
.xp-avatar.stage-mature{--pet-scale:1.06;--glow-opacity:.38}
.xp-avatar.stage-mature .animal-wrap{filter:drop-shadow(0 8px 10px rgba(80,227,194,.2))}
.xp-avatar.stage-mature .animal-head{box-shadow:0 10px 18px rgba(0,0,0,.16),0 0 0 4px rgba(80,227,194,.2)}
.xp-avatar.stage-mature .tail{width:64px;height:16px;animation:tailWag 0.85s ease-in-out infinite}
.xp-avatar.stage-mature .accessory{display:block;width:28px;height:12px;right:-4px;top:8px;border-radius:999px;background:linear-gradient(90deg,#4A90E2,#50E3C2);box-shadow:none}

@keyframes petIdle{0%,100%{transform:translateY(0) scale(var(--pet-scale))}50%{transform:translateY(-7px) scale(var(--pet-scale))}}
@keyframes petBlink{0%,44%,48%,100%{transform:scaleY(1)}46%{transform:scaleY(.08)}}
@keyframes tailWag{0%,100%{transform:rotate(20deg)}50%{transform:rotate(-8deg)}}
@keyframes glowPulse{0%,100%{transform:scale(1);opacity:var(--glow-opacity)}50%{transform:scale(1.14);opacity:calc(var(--glow-opacity) + .12)}}
.badge-list{display:flex;flex-wrap:wrap;gap:8px}.badge{padding:8px 10px;border-radius:999px}.badge.locked{filter:grayscale(1);opacity:.5;border:1px dashed var(--border)}.badge.earned{background:#ffedd5}
.toast-root{position:fixed;top:16px;right:16px;display:grid;gap:8px;z-index:999}.toast{padding:12px 14px;border-radius:12px;background:var(--card);border:1px solid var(--border);animation:slide .2s}.bg-shape{position:fixed;z-index:-1;border-radius:999px;opacity:.2;filter:blur(24px)}.shape-a{width:240px;height:240px;background:var(--primary);left:-50px;top:-50px}.shape-b{width:200px;height:200px;background:var(--secondary);right:-50px;bottom:20%}
.hidden{display:none!important}
.profile-points{white-space:pre-line;line-height:1.6}
@keyframes slide{from{transform:translateX(15px);opacity:0}}
@media (max-width:1024px){.tabs{grid-template-columns:repeat(3,1fr)}.cols-3{grid-template-columns:repeat(2,1fr)}}
@media (max-width:768px){.tabs{grid-template-columns:repeat(2,1fr)}.cols-2,.cols-3{grid-template-columns:1fr}}
