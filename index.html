<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WIT Friends</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg-shape shape-a"></div>
  <div class="bg-shape shape-b"></div>

  <header class="topbar">
    <div>
      <h1>WIT Friends</h1>
      <p class="small">Meaningful friendships through values + guided conversations</p>
    </div>
    <div class="header-actions">
      <div class="stats-pill"><span id="xpStat">XP 0</span><span id="streakStat">ðŸ”¥ 0</span></div>
      <label class="toggle-wrap"><span class="small">Theme</span><button id="themeToggle" class="icon-btn" type="button">ðŸŒ™</button></label>
      <button id="backendToggle" class="btn ghost" type="button" aria-pressed="false">Backend: OFF</button>
      <button id="resetBtn" class="btn ghost" type="button">Reset</button>
    </div>
  </header>

  <main class="container">
    <nav class="tabs" role="tablist" aria-label="Platform sections">
      <button class="tab active" data-tab="setup" type="button">Account Overview</button>
      <button class="tab" data-tab="meet" type="button">Meet Someone</button>
      <button class="tab" data-tab="gamification" type="button">Gamification</button>
      <button class="tab" data-tab="community" type="button">Chat</button>
    </nav>

    <section id="setup" class="panel active" role="tabpanel">
      <h2>Account Overview</h2>
      <article class="card" id="authCard">
        <h3>Account Access</h3>
        <p class="small">Choose Login or Create Account to continue.</p>
        <div class="auth-tabs" role="tablist" aria-label="Authentication mode">
          <button class="btn auth-tab active" data-auth-tab="login" type="button">Login</button>
          <button class="btn auth-tab" data-auth-tab="create" type="button">Create Account</button>
        </div>

        <form id="loginForm" class="grid cols-2 auth-panel" data-auth-panel="login">
          <label>Email<input required type="email" name="email" placeholder="you@example.com" /></label>
          <label>Password<input required type="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" minlength="6" /></label>
          <div class="button-row full">
            <button class="btn primary" type="submit">Login</button>
          </div>
        </form>

        <form id="createAccountForm" class="grid cols-2 auth-panel hidden" data-auth-panel="create">
          <label>Email<input required type="email" name="email" placeholder="you@example.com" /></label>
          <label>Password<input required type="password" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" minlength="6" /></label>
          <label class="full">Repeat password<input required type="password" name="repeatPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" minlength="6" /></label>
          <div class="button-row full">
            <button class="btn primary" type="submit">Create Account</button>
          </div>
        </form>

        <p id="authError" class="auth-error hidden" role="alert"></p>
      </article>

      <article class="card hidden" id="accountOverviewCard">
        <h3>Your Profile</h3>
        <div class="account-overview-row">
          <div id="accountAvatar" class="account-avatar" aria-hidden="true"></div>
          <div>
            <p id="accountOverviewName" class="account-overview-name">â€”</p>
            <p id="accountOverviewEmail" class="small">â€”</p>
          </div>
        </div>
        <div id="accountPreferencesText" class="surface profile-points"></div>
        <div class="wizard-actions">
          <button id="editAccountProfileBtn" class="btn primary" type="button">Edit Profile</button>
          <button id="logoutBtn" class="btn ghost" type="button">Logout</button>
        </div>
      </article>


      <article class="card hidden" id="profileLockedCard">
        <h3>Your Profile</h3>
        <p class="small">Please log in to view your profile.</p>
      </article>

      <div id="accountSetupFlow" class="hidden">
        <h3>Account Setup Wizard</h3>
        <div class="progress-track"><div id="wizardProgress" class="progress-fill"></div></div>
        <div class="grid cols-2">
          <form id="profileWizard" class="card">
            <div class="wizard-step" data-step="1">
              <h3>Step 1: Basic Info</h3>
              <div class="grid cols-2">
                <label>Nickname<input required name="nickname" placeholder="NovaBloom" /></label>
                <label>Age Range<select required name="ageRange"><option value="">Select</option><option>18â€“24</option><option>25â€“34</option><option>35â€“44</option><option>45+</option></select></label>
                <label>Location (optional)<input name="location" placeholder="City / Country" /></label>
                <label>Topics (comma-separated)<input name="topics" value="travel,music,books" /></label>
              </div>
            </div>
            <div class="wizard-step hidden" data-step="2">
              <h3>Step 2: Preferences</h3>
              <div class="grid cols-2">
                <label>Depth<select name="depth"><option>Light</option><option>Moderate</option><option selected>Deep</option></select></label>
                <label>Frequency<select name="frequency"><option>Daily</option><option selected>Weekly</option><option>Occasional</option></select></label>
                <label>Directness<div class="slider-wrap"><output data-output="directness">70</output><input type="range" min="0" max="100" value="70" name="directness" /></div></label>
                <label>Humor<div class="slider-wrap"><output data-output="humor">80</output><input type="range" min="0" max="100" value="80" name="humor" /></div></label>
                <label class="full">Off-limits<input name="offLimits" value="Politics" /></label>
              </div>
            </div>
            <div class="wizard-step hidden" data-step="3">
              <h3>Step 3: Values & Interests</h3>
              <div class="grid cols-2">
                <label>Empathy<div class="slider-wrap"><output data-output="valueEmpathy">90</output><input type="range" min="0" max="100" value="90" name="valueEmpathy" /></div></label>
                <label>Creativity<div class="slider-wrap"><output data-output="valueCreativity">85</output><input type="range" min="0" max="100" value="85" name="valueCreativity" /></div></label>
                <label>Travel<div class="slider-wrap"><output data-output="interestTravel">70</output><input type="range" min="0" max="100" value="70" name="interestTravel" /></div></label>
                <label>Music<div class="slider-wrap"><output data-output="interestMusic">80</output><input type="range" min="0" max="100" value="80" name="interestMusic" /></div></label>
              </div>
            </div>
            <div class="wizard-step hidden" data-step="4">
              <h3>Step 4: Summary</h3>
              <div id="profileSummary" class="surface profile-points"></div>
            </div>
            <div class="wizard-actions">
              <button id="wizardBack" class="btn ghost" type="button">Back</button>
              <button id="wizardNext" class="btn primary" type="button">Next</button>
              <button id="wizardSubmit" class="btn success hidden" type="submit">Save Profile</button>
            </div>
          </form>
          <article class="card"><h3>Live Preview</h3><div id="livePreview" class="surface profile-points"></div></article>
        </div>
      </div>

      <h3>Dashboard Snapshot</h3>
      <div class="grid cols-3">
        <article class="card">
          <h3>Daily Prompt</h3>
          <p id="dailyPromptQuestion"></p>
          <textarea id="dailyPromptAnswer" rows="2" placeholder="1-2 line answer"></textarea>
          <button id="saveDailyPrompt" class="btn primary" type="button">Save Prompt</button>
        </article>
        <article class="card">
          <h3>Weekly Intent</h3>
          <select id="weeklyIntent"><option>Meet 2 thoughtful people</option><option>Practice better listening</option><option>Join 1 new community room</option></select>
          <button id="saveWeeklyIntent" class="btn success" type="button">Set Intent</button>
          <p id="weeklyIntentSaved" class="small"></p>
        </article>
        <article class="card">
          <h3>Reflection Streak</h3>
          <p id="reflectionStreakLabel">0 days</p>
          <p class="small">Resets after 2 missed consecutive days.</p>
        </article>
      </div>

      <article class="card" id="accountNotificationsSection">
        <h3>Notifications</h3>
        <p id="accountRequestNotice" class="small">No new notifications yet.</p>
        <div id="notificationList" class="surface"></div>
      </article>

    </section>

    <section id="meet" class="panel" role="tabpanel">
      <h2>Meet Someone</h2>
      <div class="grid cols-2">
        <article class="card">
          <p id="matchStatus">Waiting to start...</p>
          <p class="small">Why matched: <span id="matchReasons">â€”</span></p>
          <div class="ring-wrap">
            <svg class="timer-ring" viewBox="0 0 120 120"><circle cx="60" cy="60" r="52" class="ring-bg"></circle><circle id="ringProgress" cx="60" cy="60" r="52" class="ring-progress"></circle></svg>
            <span id="chatTimer">00:00</span>
          </div>
          <div class="surface" id="promptPanel"><p id="currentPrompt">Press Find Match to start.</p></div>
          <label id="promptAnswerWrap" class="hidden">Type your answer
            <textarea id="promptAnswerInput" rows="3" placeholder="Write your answer here..." disabled></textarea>
          </label>
          <div class="button-row">
            <button id="startMatchBtn" class="btn primary" type="button">Find Match</button>
            <button id="respondPromptBtn" class="btn" type="button" disabled>Submit Answer (+XP)</button>
            <button id="reportBtn" class="btn warning" type="button" disabled>Report</button>
          </div>
        </article>
        <article id="decisionGate" class="card hidden">
          <h3>Request Status</h3>
          <p id="requestSentMessage" class="small">No request sent yet.</p>
        </article>
      </div>
    </section>

    <section id="gamification" class="panel" role="tabpanel">
      <h2>Gamification</h2>
      <div class="grid cols-3">
        <article class="card">
          <h3>XP</h3>
          <div class="xp-track"><div id="xpFill" class="xp-fill"></div></div>
          <p id="levelLabel" class="small"></p>
          <div id="avatarGrowthLabel" class="small avatar-growth-label"></div>
        </article>
        <article class="card">
          <h3>Avatar Growth</h3>
          <div id="xpAvatar" class="xp-avatar stage-young" aria-live="polite" aria-label="Cute panda avatar">
            <div class="avatar-glow"></div>
            <div class="animal-wrap">
              <div class="animal-head">
                <span class="ear left"></span>
                <span class="ear right"></span>
                <span class="eye left"></span>
                <span class="eye right"></span>
                <span class="nose"></span>
                <span class="muzzle"></span>
              </div>
              <div class="animal-body">
                <span class="belly"></span>
                <span class="paw left"></span>
                <span class="paw right"></span>
              </div>
              <span class="tail"></span>
              <span class="accessory"></span>
            </div>
          </div>
        </article>
        <article class="card"><h3>Streak</h3><div class="streak-icon">ðŸ”¥ <span id="streakBig">0</span></div></article>
        <article class="card"><h3>Badges</h3><div id="badgeList" class="badge-list"></div></article>
      </div>
    </section>

    <section id="community" class="panel" role="tabpanel">
      <h2>Chat</h2>
      <div class="grid cols-1">
        <article class="card" id="communityChatSection">
          <h3>Community Chat</h3>
          <p class="small">Group chat / forum-style interactions for the community prototype.</p>
          <div class="surface">
            <p><strong>#General</strong> Welcome everyone ðŸ‘‹</p>
            <p><strong>#WeekendPlans</strong> Anyone up for a local meetup?</p>
          </div>
        </article>

        <article class="card" id="directChatSection">
          <h3>Direct Chat</h3>
          <p class="small">Latest approved notification appears as a compact thread card.</p>

          <div class="connections-card">
            <h4>Connections</h4>
            <ul id="connectionsList" class="connections-list">
              <li class="small">No connections yet. Approve a notification to create one.</li>
            </ul>
          </div>

          <div id="directChatCollapsed" class="direct-chat-collapsed" role="button" tabindex="0" aria-expanded="false">
            <div>
              <p id="directChatSender" class="direct-chat-sender">No active chats</p>
              <p id="directChatSummary" class="small">Give a notification a thumbs up to start a thread.</p>
            </div>
            <div class="direct-chat-meta">
              <span id="directChatUnread" class="unread-dot hidden" aria-hidden="true"></span>
              <span id="directChatTime" class="small">â€”</span>
            </div>
          </div>

          <article id="directChatPanel" class="direct-chat-panel" aria-hidden="true">
            <div id="directChatHistory" class="direct-chat-history"></div>
            <div class="direct-chat-input-row">
              <input id="directChatInput" type="text" placeholder="Type a message..." />
              <button id="directChatSendBtn" class="btn primary" type="button">Send</button>
            </div>
          </article>
        </article>
      </div>
    </section>

  </main>

  <dialog id="reportModal"><h3>Report this user?</h3><div class="button-row"><button id="confirmReport" class="btn warning" type="button">Confirm</button><button id="cancelReport" class="btn ghost" type="button">Cancel</button></div></dialog>

  <dialog id="reflectionModal">
    <h3>Post-Meet Reflection</h3>
    <p class="small">Please submit reflection before your next meet.</p>
    <div>
      <p>Vibe rating (required)</p>
      <div id="vibePicker" class="chip-row"></div>
    </div>
    <div>
      <p>Feedback tags (optional, max 3)</p>
      <div id="feedbackChips" class="chip-row"></div>
    </div>
    <label>Meet outcome (required)
      <select id="meetOutcome"><option value="">Select</option><option value="again">Meet again</option><option value="maybe">Maybe</option><option value="pass">Not a fit</option></select>
    </label>
    <div class="button-row"><button id="submitReflection" class="btn primary" type="button">Submit Reflection</button></div>
  </dialog>

  <div id="toastRoot" class="toast-root"></div>
  <script src="api-client.js"></script>
  <script src="app.js"></script>
</body>
</html>
